@inject IJSRuntime JSRuntime
@inherits BladixComponentBase
@implements IAsyncDisposable

@if (Root?.IsOpen == true || ForceMount)
{
    @if (!string.IsNullOrEmpty(Container))
    {
        <div data-bladix-portal-container="@Container" @ref="ElementRef">
            <CascadingValue Value="Portal" IsFixed="true">
                @ChildContent
            </CascadingValue>
        </div>
    }
    else
    {
        <CascadingValue Value="Portal" IsFixed="true">
            @ChildContent
        </CascadingValue>
    }
}

@code {
    [CascadingParameter] public AlertDialogRoot? Root { get; set; }
    [Parameter] public string? Container { get; set; }
    [Parameter] public bool ForceMount { get; set; }

    private AlertDialogPortal Portal => this;

    public async ValueTask DisposeAsync()
    {
        // Cleanup if needed
        GC.SuppressFinalize(this);
    }
}
